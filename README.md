# Python для решения практических задач

Решение задач курса "Python для решения практических задач" (https://stepik.org/course/4519/)

<h1> Обработка web-страниц </h1>

<h2> 1.1 Скачивание web-страниц </h2>
Мы сохранили страницу с википедии про языки программирования и сохранили по адресу <a href="https://stepik.org/media/attachments/lesson/209717/1.html">https://stepik.org/media/attachments/lesson/209717/1.html</a>
Скачайте её с помощью скрипта на Питоне и посчитайте, какой язык упоминается чаще Python или C++ (ответ должен быть одной из этих двух строк).
<b> Ответ: C++ </b>

<h2> 1.2 Скачивание web-страниц </h2>
Файл <a href="https://stepik.org/media/attachments/lesson/209719/2.html">https://stepik.org/media/attachments/lesson/209719/2.html</a> содержит статью с Википедии про язык Python. В этой статье есть теги code, которыми выделяются конструкции на языке Python. Вам нужно найти все строки, содержащиеся между тегами 'code' и '/code' и найти те строки, которые встречаются чаще всего и вывести их в алфавитном порядке, разделяя пробелами.
Например, если исходный текст страницы выглядел бы так:
<br/><code>< code >a< / code > </code>
<br/><code>< a >bracadabr< /a > </code>
<br/><code>< code >c< / code > </code>
<br/><code>< code >b< / code > </code>
<br/><code>< code >b< / code > </code>
<br/><code>< code >c< / code > </code>
<br/>

то в ответ надо было бы ввести строку "b c".
<br/><b> Ответ: else except finally </b>

<h2> 1.3 Знакомство с BeautifulSoup </h2>
Сейчас вам нужно установить библиотеку BeautifulSoup. Чтобы проверить, что всё установилось хорошо, необходимо запусить код, представленный ниже и сдать в качестве ответа то, что он выводит.
<br/><b> Ответ: 94596065609609271052308 </b>

<h2> 1.4 Использование BeautifulSoup </h2>
В файле <a href="https://stepik.org/media/attachments/lesson/209723/3.html">https://stepik.org/media/attachments/lesson/209723/3.html</a> находится одна таблица. Просуммируйте все числа в ней и введите в качестве ответа одно число - эту сумму. Для доступа к ячейкам используйте возможности BeautifulSoup.
<br/><b> Ответ: 1005425 </b>

<br/>В файле <a href="https://stepik.org/media/attachments/lesson/209723/4.html">https://stepik.org/media/attachments/lesson/209723/4.html</a> находится одна таблица. Просуммируйте все числа в ней. Теперь мы добавили разных тегов для изменения стиля отображения. Для доступа к ячейкам используйте возможности BeautifulSoup.
<br/><b> Ответ: 29536 </b>

В файле <a href="https://stepik.org/media/attachments/lesson/209723/5.html">https://stepik.org/media/attachments/lesson/209723/5.html</a> находится одна таблица. Просуммируйте все числа в ней. Теперь мы не только добавили разных тегов для изменения стиля отображения, но и сделали невалидный HTML-код (правда, браузеры его отображают, а вот с BeautifulSoup могут быть проблемы). Невалидный HTML-код - не редкость в интернете, надо учиться работать и с этим. Вы можете исправить html-код или попробовать использовать нестандартный парсер html, такой как html5lib.
<br/><b> Ответ: 28734 </b>

<h1> Электронные таблицы </h1>
    
<h2> 2.1 Знакомство с электронными таблицами </h2>
Для решения этой задачи необходимо установить библиотеку xlrd, скачать файл <a href="https://stepik.org/media/attachments/lesson/245266/tab.xlsx">https://stepik.org/media/attachments/lesson/245266/tab.xlsx</a> и создать в папке с этим файлом скрипт со следующем содержанием:
<br/>
<code>
    import xlrd
    wb = xlrd.open_workbook('tab.xlsx')
    sheet_names = wb.sheet_names()<br/>
    sh = wb.sheet_by_name(sheet_names[0])
    nmin = sh.row_values(6)[2]
    for rownum in range(7, 27):
        temp = sh.row_values(rownum)
        nmin = min(nmin, temp[2])
    print(nmin)
</code>
<br/>
<br/><b> Ответ: 39650.2 </b>
    
<h2> 2.2 Работа с одним листом </h2>
Вася планирует карьеру и переезд. Для это составил таблицу, в которой для каждого региона записал зарплаты для разных интересные ему профессий. Таблица доступна по ссылке <a href="https://stepik.org/media/attachments/lesson/245267/salaries.xlsx">https://stepik.org/media/attachments/lesson/245267/salaries.xlsx</a>. Выведите название региона с самой высокой медианной зарплатой (медианой называется элемент, стоящий в середине массива после его упорядочивания) и, через пробел, название профессии с самой высокой средней зарплатой по всем регионам. 
<br/><b> Ответ: Куала-Лумпур Собачий парикмахер </b>   

    
<h2> 2.3 Работа с несколькими листами </h2>
Васю назначили завхозом в туристической группе и он подошёл к подготовке ответственно, составив справочник продуктов с указанием калорийности на 100 грамм, а также содержание белков, жиров и углеводов на 100 грамм продукта. Ему не удалось найти всю информацию, поэтому некоторые ячейки остались незаполненными (можно считать их значение равным нулю). Также он использовал какой-то странный офисный пакет и разделял целую и дробную часть чисел запятой. Таблица доступна по ссылке <a href="https://stepik.org/media/attachments/lesson/245290/trekking1.xlsx">https://stepik.org/media/attachments/lesson/245290/trekking1.xlsx</a>

Вася хочет минимизировать вес продуктов и для этого брать самые калорийные продукты. Помогите ему и упорядочите продукты по убыванию калорийности. В случае, если продукты имеют одинаковую калорийность - упорядочите их по названию. В качестве ответа необходимо сдать названия продуктов, по одному в строке.
    

<br/><b> Ответ: 
Шоколад молочный какао<br/>
Шоколад молочный миндаль<br/>
Сухофрукты<br/>
Омлет с копченостями галагала<br/>
Свинина сублимрованная<br/>
Шоколад ремесленный<br/>
Козинак подсолнечный<br/>
Омлет с грибами галагала<br/>
Козинак арахисовый<br/>
Хлебцы льняные "Тайские"<br/>
Колбаса с/к "Еврейская полусухая"<br/>
Говядина сублимрованная<br/>
Сухарики ржаные с семечками<br/>
Хлебцы льняные Морские<br/>
Суп говяжий с картофелем галагала<br/>
Суп гороховый с копченостями<br/>
Суп гороховый с копченостями галагала<br/>
Суп куриный с картофелем галагала<br/>
Суп-гуляш галагала<br/>
Суп-харчо "Острый"<br/>
Сыр Маасдам<br/>
Сыр Чеддер<br/>
Борщ Московский Галагала<br/>
Крупа гречневая<br/>
Рис пропаренный Увелка<br/>
Свинина Кронидов<br/>
Сухарики ржаные Finn Crisp<br/>
Капеллини Макфа<br/>
Сыр Гауда<br/>
Кус Кус<br/>
Каша Быстров<br/>
Картофель сушеный<br/>
Говядина Кронидов<br/>
Хлебцы с чесноком и луком<br/>
Суп томатный с рисом<br/>
Балык "Королевский"<br/>
Паутина
</b>   
    
 
Васю назначили завхозом в туристической группе и он подошёл к подготовке ответственно, составив справочник продуктов с указанием калорийности на 100 грамм, а также содержание белков, жиров и углеводов на 100 грамм продукта. Ему не удалось найти всю информацию, поэтому некоторые ячейки остались незаполненными (можно считать их значение равным нулю). Также он использовал какой-то странный офисный пакет и разделял целую и дробную часть чисел запятой. Таблица доступна по ссылке <a href="https://stepik.org/media/attachments/lesson/245290/trekking2.xlsx ">https://stepik.org/media/attachments/lesson/245290/trekking2.xlsx</a>

Вася составил раскладку по продуктам на один день (она на листе "Раскладка") с указанием названия продукта и его количества в граммах. Посчитайте 4 числа: суммарную калорийность и граммы белков, жиров и углеводов. Числа округлите до целых вниз и введите через пробел.
    
<br/><b> Ответ: 4963 203 307 302 </b> 
    
Васю назначили завхозом в туристической группе и он подошёл к подготовке ответственно, составив справочник продуктов с указанием калорийности на 100 грамм, а также содержание белков, жиров и углеводов на 100 грамм продукта. Ему не удалось найти всю информацию, поэтому некоторые ячейки остались незаполненными (можно считать их значение равным нулю). Также он использовал какой-то странный офисный пакет и разделял целую и дробную часть чисел запятой. Таблица доступна по ссылке <a href="https://stepik.org/media/attachments/lesson/245290/trekking3.xlsx">https://stepik.org/media/attachments/lesson/245290/trekking3.xlsx</a>

Вася составил раскладку по продуктам на весь поход (она на листе "Раскладка") с указанием номера дня, названия продукта и его количества в граммах. Для каждого дня посчитайте 4 числа: суммарную калорийность и граммы белков, жиров и углеводов. Числа округлите до целых вниз и введите через пробел. Информация о каждом дне должна выводиться в отдельной строке.
<br/><b> Ответ: 
2405 82 154 172<br/>
4963 203 307 302<br/>
5219 178 267 502<br/>
4873 241 204 537<br/>
5278 243 314 367<br/>
4451 190 188 497<br/>
4806 205 265 386<br/>
5738 264 195 720<br/>
1766 66 90 171
</b>

<h2> 2.3 Работа с несколькими листами </h2>
Главный бухгалтер компании "Рога и копыта" случайно удалил ведомость с начисленной зарплатой. К счастью, у него сохранились расчётные листки всех сотрудников. Помогите по этим расчётным листкам восстановить зарплатную ведомость. Архив с расчётными листками доступен по ссылке <a href="https://stepik.org/media/attachments/lesson/245299/rogaikopyta.zip">https://stepik.org/media/attachments/lesson/245299/rogaikopyta.zip</a> (вы можете скачать и распаковать его вручную или самостоятельно научиться делать это с помощью скрипта на Питоне).

Ведомость должна содержать 1000 строк, в каждой строке должно быть указано ФИО сотрудника и, через пробел, его зарплата. Сотрудники должны быть упорядочены по алфавиту.
    
<br/><b> Ответ: Файл 'rogaikopyta.txt' </b> 
    
<h1> XML </h1>
    
<h2> 3.1 Знакомство с XML </h2>
В этой задаче нужно просто установить библиотеку xmltodict, скачать файл <a href="https://stepik.org/media/attachments/lesson/245571/map1.osm">https://stepik.org/media/attachments/lesson/245571/map1.osm</a>, создать в директории с файлом скрипт со следующим содержанием:
    
    <code>
        fin = open('map1.osm', 'r', encoding='utf8')
        xml = fin.read()
        fin.close()

        parsedxml = xmltodict.parse(xml)
        print(parsedxml['osm']['node'][100]['@id'])
    </code>
    
<br/><b> Ответ: 296932122 </b> 
    
<h2> 3.2 OpenStreetMap как пример XML </h2>
В OpenStreetMap XML встречаются теги node, которые соответствуют некоторым точкам на карте. Ноды могут не только обозначать какой-то точечный объект, но и входить в состав way (некоторой линии, возможно замкнутой) и не иметь собственных тегов. Для доступного по ссылке <a href="https://stepik.org/media/attachments/lesson/245678/map1.osm">https://stepik.org/media/attachments/lesson/245678/map1.osm</a> фрагмента карты посчитайте, сколько node имеет хотя бы один вложенный тэг tag, а сколько - не имеют. В качестве ответа введите два числа, разделённых пробелом.

<br/><b> Ответ: 316 6166 </b>   

<h2> 3.3 Обработка XML с разным количеством вложенных тэгов </h2>
Вася решил открыть АЗС (заправку). Чтобы оценить уровень конкуренции он хочет изучить количество заправок в интересующем его районе. Вася скачал интересующий его кусок карты OSM <a href="https://stepik.org/media/attachments/lesson/245681/map2.osm">https://stepik.org/media/attachments/lesson/245681/map2.osm</a> и хочет посчитать, сколько на нём отмечено точечных объектов (node), являющихся заправкой. В качестве ответа вам необходимо вывести одно число - количество АЗС.

"Как обозначается заправка в OpenStreetMap" - пример хорошего запроса чтобы узнать, как обозначается заправка в OpenStreetMap.
    
<br/><b> Ответ: 15 </b> 
    
    
<h2> 3.4 Как добыть нужную информацию, не читая документацию к API </h2>
Вася, открывший заправку в прошлом уроке, разорился. Конкуренция оказалась слишком большой. Вася предполагает, что это произошло от того, что теги заправки могут быть не только на точке, но и на каком-то контуре. Определите, сколько заправок на самом деле (не только обозначенных точкой) есть на фрагменте карты <a href="https://stepik.org/media/attachments/lesson/245681/map2.osm">https://stepik.org/media/attachments/lesson/245681/map2.osm</a>
    
<br/><b> Ответ: 27 </b> 
    
<h1> Визуализация с использованием pyplot </h1>
    
<h2> 4.1 Знакомство с pyplot </h2>

Это задание необходимо для того, чтобы проверить, что у вас все хорошо с библиотекой matplotlib.

Создайте и запустите следующий файл:

Откройте файл trigan.png и выберите, значение какой функции больше в точке x = 6. У вас всего одна попытка ответить на этот вопрос, будьте внимательны!

<br/><b> Ответ: В точке 6 большее значение у красной функции </b> 
    
В видео мы нашли хорошую статью, которая находится по ссылке https://eax.me/python-matplotlib/, она может быть вам полезна.

Воспользуемся первым примером оттуда:

Вам необходимо переместить легенду (подписи к графикам) из правого верхнего в левый нижний угол. Исправьте ровно одну строку в этой программе (не меняя ничего другого) и сдайте исправленный исходный код программы. Пожалуйста, используйте одинарные кавычки и расстановку пробелов в том же стиле, в котором написан пример.
 
<br/><b> Ответ: plt.legend(loc = 'lower left') # нужно было исправить эту строчку plt.legend(loc = 'upper right') </b> 

Воспользуемся еще одним примером из статьи https://eax.me/python-matplotlib/:

<br/><b> Ответ: fig = plt.figure(dpi = dpi, figsize = (1024 / dpi, 768 / dpi) ) # нужно было исправить эту строчку fig = plt.figure(dpi = dpi, figsize = (512 / dpi, 384 / dpi) ) </b> 

<h1> Публикация данных </h1>

<h2> 5.1 Создание веб-сервера </h2>

Чтобы мы могли представлять данные красиво, необходимо научиться создавать html-файлы вручную. Мы уже анализировали их и имеем некоторое представление об их устройстве, но, как обычно, можно найти необходимую для создания html-файлов информацию в поисковике.

В этой задаче вам необходимо сдать на проверку html-файл, в котором будет таблица размером 2 на 2, которая должна содержать в ячейках первой строки числа 1 и 2, а в ячейках второй строки числа 3 и 4. При открытии вашего файла в браузере это должно выглядеть примерно так:



Ваш файл должен начинаться с тегов < html> и < body> и заканчиваться </ body> и </ html>.

Для создания таблицы можно пользоваться тегами < table> (создание таблицы), < tr> (создание строки в таблице) и < td> (создание отдельной ячейки). Все открытые теги нужно закрыть, причем сделать это нужно в правильном порядке.

Пожалуйста, не используйте никаких украшений и других тегов - мы не сможем проверить такие решения.
<br/><b> Ответ: 
<html>
    <body>
        <table>
            <tr>
                <td>1</td>
                <td>2</td>
            </tr>
            <tr>
                <td>3</td>
                <td>4</td>
            </tr>
        </table>
    </body>
</html>    
</b> 
    
В этой задаче вам необходимо научиться генерировать html-код на питоне и сдать на проверку html-файл, в котором будет таблица размером 10 на 10, которая должна содержать таблицу умножения для чисел от 1 до 10. При открытии вашего файла в браузере это должно выглядеть примерно так:

Ваш файл должен начинаться с тегов < html> и < body> и заканчиваться </ body> и </ html>.

Для создания таблицы можно пользоваться тегами < table> (создание таблицы), < tr> (создание строки в таблице) и < td> (создание отдельной ячейки). Все открытые теги нужно закрыть, причем сделать это нужно в правильном порядке.

Пожалуйста, не используйте никаких украшений и других тегов - мы не сможем проверить такие решения.

indent = 0
space_tab = 4

with open('5.1.2.html', 'w') as file:
    file.write('<html>')
    file.write(' ' * space_tab * (indent + 1) + '<body>')
    file.write(' ' * space_tab * (indent + 2) + '<table>')
    for row in range(1, 11):
        file.write(' ' * space_tab * (indent + 3) + '<tr>')
        for column in range(1, 11):
            file.write(' ' * space_tab * (indent + 4) + '<td>' + str(row*column) + '</td>')
        file.write(' ' * space_tab * (indent + 3) + '</tr>')
    
    file.write(' ' * space_tab * (indent + 2) + '</table>')
    file.write(' ' * space_tab * (indent + 1) + '</body>')
    file.write('</html>')
    
В этой задаче вам предстоит научиться создавать ссылки. Вам нужно сгенерировать html-код на питоне и сдать на проверку html-файл, в котором будет таблица размером 10 на 10, которая должна содержать таблицу умножения для чисел от 1 до 10. Каждое число в таблице должно быть ссылкой на страницу http://<это число>.ru. Например, число 12 должно быть ссылкой на страницу http://12.ru

При открытии вашего файла в браузере это должно выглядеть примерно так:



Ваш файл должен начинаться с тегов < html> и < body> и заканчиваться </ body> и </ html>.

Для создания таблицы можно пользоваться тегами < table> (создание таблицы), < tr> (создание строки в таблице) и < td> (создание отдельной ячейки). Все открытые теги нужно закрыть, причем сделать это нужно в правильном порядке.

Для создания ссылки пользуйтесь тегом < a>. Например, ссылка на страницу http://hse.ru с текстом "Высшая школа экономики" должна выглядеть так: < a href=http://hse.ru>Высшая школа экономики</ a>.

Пожалуйста, не используйте никаких украшений и других тегов - мы не сможем проверить такие решения.
    
indent = 0
space_tab = 4

with open('5.1.3.html', 'w') as file:
    file.write('<html>')
    file.write(' ' * space_tab * (indent + 1) + '<body>')
    file.write(' ' * space_tab * (indent + 2) + '<table>')
    for row in range(1, 11):
        file.write(' ' * space_tab * (indent + 3) + '<tr>')
        for column in range(1, 11):
            file.write(' ' * space_tab * (indent + 4) + '<td><a href=http://{0}.ru>'.format(str(row*column)) + str(row*column) + '</a></td>')
        file.write(' ' * space_tab * (indent + 3) + '</tr>')
    
    file.write(' ' * space_tab * (indent + 2) + '</table>')
    file.write(' ' * space_tab * (indent + 1) + '</body>')
    file.write('</html>')
    
<h2> 5.2 Обработка форм и генерация HTML </h2>

В этой задаче вам предстоит настроить и запустить веб-сервер. Создайте файл index.html с формой, в которой есть единственное текстовое поле ввода с именем INPUT_TEXT и кнопка отправить.

В папке cgi-bin создайте скрипт со следующим содержанием:
    
Запустите скрипт, поднимающий веб-сервер с вашей формой, откройте страницу и введите слово Python (обязательно с большой буквы). У вас должна открыться страница, содержащая единственное число, введите его в качестве ответа.
    
<br/><b> Ответ: 2290710658703611189398393962 </b> 
    
В этой задаче вам предстоит настроить и запустить веб-сервер, а также обнаружить проблему в скрипте, обрабатывающем данные формы. Создайте файл index.html с формой, в которой есть единственное текстовое поле ввода с именем INPUT_TEXT и кнопка отправить.

В папке cgi-bin создайте скрипт со следующим содержанием:
    
Запустите скрипт, поднимающий веб-сервер с вашей формой, откройте страницу и введите слово Python (обязательно с большой буквы). У вас должна открыться страница, содержащая несколько чисел. Однако, если вы откроете ее исходный текст, то обнаружите, что она обрывается без закрытия некоторых тегов, а это значит, что что-то пошло не так.

Поймите, где искать сообщение об ошибке и в качестве ответа введите номер строки, в которой произошла ошибка.
    
<br/><b> Ответ: 17 </b> 